{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst form = document.querySelector('.form');\nconst input_search = document.querySelector('.input__search');\nconst gallery = document.querySelector(\".gallery\");\nconst load = document.querySelector(\".load\");\n\nform.addEventListener('submit', (arg) => {\n    arg.preventDefault();\n    gallery.innerHTML = \"\";\n    getRandomImages();\n});\n\nfunction getRandomImages() {\n    load.classList.add('loader');\n    let randomPage = Math.floor(Math.random() * 10) + 1;\n    let searchParams = new URLSearchParams({\n        key: \"41527522-465889db431a6a06c19f4d10b\",\n        q: input_search.value,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: randomPage,\n    });\n    fetch(`https://pixabay.com/api/?${searchParams}`)\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        })\n        .then((images) => {\n            if (images.total === 0) {\n                console.log(images);\n                iziToast.show({\n                    titleColor: 'white',\n                    position: 'topRight',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    progressBarColor: '#B51B1B'\n                });\n                return;\n            }\n            if (images.total + 19 < randomPage * 20) {\n                console.log(`Total image: ${images.total} less than RandomPage ${randomPage} and needed count of images ${randomPage * 20}`);\n                handleEmptyPageResult();\n                return;\n            }\n            load.classList.remove('loader');\n            const markup = images.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n                return `<li class=\"gallery__item\">\n                    <a class=\"gallery__link\" href=\"${largeImageURL}\">\n                        <img\n                            class=\"gallery__image\"\n                            src=\"${webformatURL}\"\n                            alt=\"${tags}\"/>\n                        <ul class=\"info__list\">\n                        <li class=\"info__item\">\n                        <span>Likes</span>\n                        <span>${likes}</span>\n                        </li>\n                        <li class=\"info__item\">\n                        <span>Views</span>\n                        <span>${views}</span>\n                        </li>\n                        <li class=\"info__item\">\n                        <span>Comments</span>\n                        <span>${comments}</span>\n                        </li>\n                        <li class=\"info__item\">\n                        <span>Downloads</span>\n                        <span>${downloads}</span>\n                        </li>\n                        </ul>\n            \n                    </a>\n            </li>`;\n            })\n                .join(\"\");\n            gallery.insertAdjacentHTML(\"beforeend\", markup);\n            var lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: '250' /* options */ });\n            lightbox.refresh();\n            console.log(images);\n        })\n        .catch((error) => console.log(error));\n}\n\nfunction handleEmptyPageResult() {\n    getRandomImages();\n}\n"],"names":["form","input_search","gallery","load","arg","getRandomImages","randomPage","searchParams","response","images","iziToast","handleEmptyPageResult","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","error"],"mappings":"6vBAGA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EAE3CH,EAAK,iBAAiB,SAAWI,GAAQ,CACrCA,EAAI,eAAc,EAClBF,EAAQ,UAAY,GACpBG,GACJ,CAAC,EAED,SAASA,GAAkB,CACvBF,EAAK,UAAU,IAAI,QAAQ,EAC3B,IAAIG,EAAa,KAAK,MAAM,KAAK,SAAW,EAAE,EAAI,EAC9CC,EAAe,IAAI,gBAAgB,CACnC,IAAK,qCACL,EAAGN,EAAa,MAChB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMK,CACd,CAAK,EACD,MAAM,4BAA4BC,GAAc,EAC3C,KAAMC,GAAa,CAChB,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAS,EACA,KAAMC,GAAW,CACd,GAAIA,EAAO,QAAU,EAAG,CACpB,QAAQ,IAAIA,CAAM,EAClBC,EAAS,KAAK,CACV,WAAY,QACZ,SAAU,WACV,QAAS,2EACT,aAAc,QACd,gBAAiB,UACjB,iBAAkB,SACtC,CAAiB,EACD,MACH,CACD,GAAID,EAAO,MAAQ,GAAKH,EAAa,GAAI,CACrC,QAAQ,IAAI,gBAAgBG,EAAO,8BAA8BH,gCAAyCA,EAAa,IAAI,EAC3HK,IACA,MACH,CACDR,EAAK,UAAU,OAAO,QAAQ,EAC9B,MAAMS,EAASH,EAAO,KAAK,IAAI,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAC3F;AAAA,qDAC8BL;AAAA;AAAA;AAAA,mCAGlBD;AAAA,mCACAE;AAAA;AAAA;AAAA;AAAA,gCAIHC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMnB,EACI,KAAK,EAAE,EACZjB,EAAQ,mBAAmB,YAAaU,CAAM,EAC9C,IAAIQ,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,KAAK,CAAgB,EAC1GD,EAAS,QAAO,EAChB,QAAQ,IAAIX,CAAM,CAC9B,CAAS,EACA,MAAOa,GAAU,QAAQ,IAAIA,CAAK,CAAC,CAC5C,CAEA,SAASX,GAAwB,CAC7BN,GACJ"}